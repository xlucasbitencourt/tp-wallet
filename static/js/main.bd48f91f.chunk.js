(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{42:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),c=a.n(r),o=a(22),s=a(7),i=a(13),u=a(32),m=a(33),p=a(3),d=a(17),h=a(24),E="LOGIN",b="GET_CURRENCIES",v="ADD_EXPENSE",f="UPDATE_AMOUNT",g="DELETE_EXPENSE",y="https://economia.awesomeapi.com.br/json/all",j=function(e){return{type:v,payload:e}},O=function(e,t){return function(a){var n=e.filter((function(e){return e.id!==t}));return a(function(e){return{type:g,payload:e}}(n)),n}},x=function(e){var t=Object.values(e.exchangeRates).filter((function(t){return t.code===e.currency&&"BRL"===t.codein}))[0].ask*e.value;return{type:f,payload:t}},w=function(e){return function(){var t=Object(h.a)(Object(d.a)().mark((function t(a){var n,l;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(y);case 2:return n=t.sent,t.next=5,n.json();case 5:l=t.sent,a(j(Object(p.a)(Object(p.a)({},e),{},{exchangeRates:l}))),a(x(Object(p.a)(Object(p.a)({},e),{},{exchangeRates:l})));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C={email:"",password:""},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;return t.type===E?Object(p.a)(Object(p.a)({},e),t.payload):e},F=a(27),N={currencies:[],expenses:[],editor:!1,idToEdit:0},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(p.a)(Object(p.a)({},e),{},{currencies:Object(F.a)(t.payload)});case v:return Object(p.a)(Object(p.a)({},e),{},{expenses:[].concat(Object(F.a)(e.expenses),[t.payload])});case f:return Object(p.a)(Object(p.a)({},e),{},{total:e.total+t.payload});case g:return Object(p.a)(Object(p.a)({},e),{},{expenses:t.payload});default:return e}},R=Object(i.combineReducers)({user:k,wallet:D}),A=Object(i.createStore)(R,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(m.a))),S=(a(42),a(2)),T=a(15),L=a(9),M=a(10),B=a(11),z=a(12),I=function(e){Object(B.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(L.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:"",buttonDisabled:!0},e.handleChange=function(t){var a=t.target,n=a.name,l=a.value;e.setState(Object(T.a)({},n,l),e.enableButton)},e.enableButton=function(){var t=e.state,a=t.email;t.password.length>=6&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/gim.test(a)?e.setState({buttonDisabled:!1}):e.setState({buttonDisabled:!0})},e.clickLogin=function(){var t=e.props,a=t.history,n=t.userLogin,l=e.state;n({email:l.email,password:l.password}),a.push("/carteira")},e}return Object(M.a)(a,[{key:"render",value:function(){var e=this.state,t=e.buttonDisabled,a=e.email,n=e.password;return l.a.createElement("div",{className:"login"},l.a.createElement("h1",null,"Wallet"),l.a.createElement("form",{className:"form-login"},l.a.createElement("h2",null,"Login"),l.a.createElement("label",{className:"label-login",htmlFor:"email"},l.a.createElement("span",null,"E-mail: "),l.a.createElement("input",{name:"email",value:a,onChange:this.handleChange,"data-testid":"email-input",type:"email",required:!0,placeholder:"Digite seu e-mail..."})),l.a.createElement("label",{className:"label-login",htmlFor:"password"},l.a.createElement("span",null,"Senha: "),l.a.createElement("input",{name:"password",value:n,onChange:this.handleChange,"data-testid":"password-input",type:"password",required:!0,min:"6",placeholder:"Digite sua senha..."})),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.clickLogin,type:"button",disabled:t},"Entrar")))}}]),a}(l.a.Component),P={userLogin:function(e){return{type:E,payload:e}}},U=Object(s.b)(null,P)(I),V=function(e){Object(B.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(L.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).updateTotal=function(){var t=e.props.expenses.reduce((function(e,t){return e+=parseFloat(t.value)*parseFloat(t.exchangeRates[t.currency].ask)}),0);return parseFloat(t)},e}return Object(M.a)(a,[{key:"render",value:function(){var e=this.props.email;return l.a.createElement("div",{className:"header"},l.a.createElement("span",{"data-testid":"email-field"},e),l.a.createElement("span",{"data-testid":"total-field"},"Total:"," ",this.updateTotal().toFixed(2)),l.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))}}]),a}(n.Component),_=Object(s.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}),null)(V),W={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimentacao"},Z=function(e){Object(B.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(L.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state=W,e.handleChange=function(t){var a=t.target,n=a.name,l=a.value;e.setState(Object(T.a)({},n,l))},e.buttonAddExpense=function(){var t=e.props,a=t.expenseId,n=t.dispatch,l=e.state,r=l.value,c=l.description,o=l.currency,s=l.method,i=l.tag;r&&(n(w({id:a,value:r,description:c,currency:o,method:s,tag:i})),e.setState(W))},e}return Object(M.a)(a,[{key:"render",value:function(){var e=this.props.currencies,t=this.state,a=t.value,n=t.description,r=t.currency,c=t.method,o=t.tag;return l.a.createElement("div",{className:"expenses"},l.a.createElement("label",{htmlFor:"value"},l.a.createElement("span",null,"Valor: "),l.a.createElement("input",{"data-testid":"value-input",type:"number",name:"value",value:a,onChange:this.handleChange})),l.a.createElement("label",{htmlFor:"description"},l.a.createElement("span",null,"Descri\xe7\xe3o: "),l.a.createElement("input",{"data-testid":"description-input",name:"description",value:n,onChange:this.handleChange})),l.a.createElement("label",{htmlFor:"currency"},l.a.createElement("span",null,"Moeda: "),l.a.createElement("select",{name:"currency",id:"currency",value:r,onChange:this.handleChange},e.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))),l.a.createElement("label",{htmlFor:"method"},l.a.createElement("span",null,"Pagamento: "),l.a.createElement("select",{"data-testid":"method-input",name:"method",id:"method",value:c,onChange:this.handleChange},l.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),l.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),l.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),l.a.createElement("label",{htmlFor:"tag"},l.a.createElement("span",null,"Categoria: "),l.a.createElement("select",{"data-testid":"tag-input",name:"tag",id:"tag",value:o,onChange:this.handleChange},l.a.createElement("option",{value:"Alimentacao"},"Alimenta\xe7\xe3o"),l.a.createElement("option",{value:"Lazer"},"Lazer"),l.a.createElement("option",{value:"Trabalho"},"Trabalho"),l.a.createElement("option",{value:"Transporte"},"Transporte"),l.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),l.a.createElement("button",{className:"main-button",type:"button",onClick:this.buttonAddExpense},"Adicionar despesa"))}}]),a}(n.Component),$=Object(s.b)((function(e){return{currencies:e.wallet.currencies,expenseId:e.wallet.expenses.length}}))(Z),q=function(e){Object(B.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(L.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).delete=function(t,a){(0,e.props.dispatch)(O(t,a))},e}return Object(M.a)(a,[{key:"render",value:function(){var e=this,t=this.props.expenses;return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Descri\xe7\xe3o"),l.a.createElement("th",null,"Categoria"),l.a.createElement("th",null,"M\xe9todo de pagamento"),l.a.createElement("th",null,"Valor"),l.a.createElement("th",null,"Moeda"),l.a.createElement("th",null,"C\xe2mbio utilizado"),l.a.createElement("th",null,"Valor convertido"),l.a.createElement("th",null,"Moeda de convers\xe3o"),l.a.createElement("th",null,"Excluir"))),l.a.createElement("tbody",null,t.map((function(a){return l.a.createElement("tr",{key:a.id},l.a.createElement("td",null,a.description),l.a.createElement("td",null,a.tag),l.a.createElement("td",null,a.method),l.a.createElement("td",null,parseFloat(a.value).toFixed(2)),l.a.createElement("td",null,a.exchangeRates[a.currency].name),l.a.createElement("td",null,parseFloat(a.exchangeRates[a.currency].ask).toFixed(2)),l.a.createElement("td",null,(a.value*a.exchangeRates[a.currency].ask).toFixed(2)),l.a.createElement("td",null,"Real"),l.a.createElement("td",null,l.a.createElement("button",{"data-testid":"delete-btn",type:"button",name:"excluir",onClick:function(){return e.delete(t,a.id)}},"Excluir")))})))),l.a.createElement("div",{className:"expenses-list"},l.a.createElement("h2",null,"Despesas"),t.map((function(a){return l.a.createElement("div",{className:"expense-mobile",key:a.id},l.a.createElement("p",null,"Despesa"," ",a.id+1),l.a.createElement("span",{className:"title"},"Descri\xe7\xe3o: "),l.a.createElement("span",null,a.description),l.a.createElement("br",null),l.a.createElement("span",{className:"title"},"Categoria: "),l.a.createElement("span",null,a.tag),l.a.createElement("br",null),l.a.createElement("span",{className:"title"},"M\xe9todo de pagamento: "),l.a.createElement("span",null,a.method),l.a.createElement("br",null),l.a.createElement("span",{className:"title"},"Valor: "),l.a.createElement("span",null,parseFloat(a.value).toFixed(2)),l.a.createElement("br",null),l.a.createElement("span",{className:"title"},"Moeda: "),l.a.createElement("span",null,a.exchangeRates[a.currency].name),l.a.createElement("br",null),l.a.createElement("span",{className:"title"},"C\xe2mbio utilizado: "),l.a.createElement("span",null,parseFloat(a.exchangeRates[a.currency].ask).toFixed(2)),l.a.createElement("br",null),l.a.createElement("span",{className:"title"},"Valor convertido: "),l.a.createElement("span",null,(a.value*a.exchangeRates[a.currency].ask).toFixed(2)),l.a.createElement("br",null),l.a.createElement("span",{className:"title"},"Moeda de convers\xe3o: "),l.a.createElement("span",null,"Real"),l.a.createElement("br",null),l.a.createElement("button",{className:"main-button",type:"button",onClick:function(){return e.delete(t,a.id)}},"Excluir"))}))))}}]),a}(n.Component),G=Object(s.b)((function(e){return{expenses:e.wallet.expenses,newExpenses:e.wallet}}))(q),J=function(e){Object(B.a)(a,e);var t=Object(z.a)(a);function a(){return Object(L.a)(this,a),t.apply(this,arguments)}return Object(M.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(){var e=Object(h.a)(Object(d.a)().mark((function e(t){var a,n,l;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,l=Object.keys(n).filter((function(e){return"USDT"!==e})),t({type:b,payload:l});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(_,null),l.a.createElement($,null),l.a.createElement(G,null))}}]),a}(l.a.Component),X=Object(s.b)()(J);var H=function(){var e=l.a.createElement("a",{href:"https://lucasbitencourt.com.br/"},"Lucas Btencourt");return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-header"},l.a.createElement("p",null,"Projeto feito por"," ",e)),l.a.createElement(S.c,null,l.a.createElement(S.a,{path:"/carteira",component:X}),l.a.createElement(S.a,{exact:!0,path:"/",component:U})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(o.a,{basename:"/tp-wallet"},l.a.createElement(s.a,{store:A},l.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.bd48f91f.chunk.js.map